"use strict";var nla=angular.module("ngLetterAvatar",[]);nla.constant("defaultSettings",{alphabetcolors:["#5A8770","#B2B7BB","#6FA9AB","#F5AF29","#0088B9","#F18636","#D93A37","#A6B12E","#5C9BBC","#F5888D","#9A89B5","#407887","#9A89B5","#5A8770","#D33F33","#A2B01F","#F0B126","#0087BF","#F18636","#0087BF","#B2B7BB","#72ACAE","#9C8AB4","#5A8770","#EEB424","#407887"],textColor:"#ffffff",defaultBorder:"border:5px solid white",triangleup:"width: 0;height: 0;border-left: 50px solid transparent;border-right: 50px solid transparent;border-bottom: 100px solid;",fontsize:30,height:50,width:50,fontWeight:400,charCount:1,fontFamily:"HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica, Arial,Lucida Grande, sans-serif",base:"data:image/svg+xml;base64,",radius:"border-radius:50%;",custombgcolor:"",dynamic:"false",rotatedeg:"0"});nla.directive("ngLetterAvatar",["defaultSettings",function(a){return{restrict:"AE",replace:true,scope:{alphabetcolors:"=alphabetcolors",data:"@"},link:function(e,d,c){var f={charCount:c.charcount||a.charCount,data:c.data,textColor:a.textColor,height:c.height||a.height,width:c.width||a.width,fontsize:c.fontsize||a.fontsize,fontWeight:c.fontweight||a.fontWeight,fontFamily:c.fontfamily||a.fontFamily,avatarBorderStyle:c.avatarcustomborder,avatardefaultBorder:c.avatarborder,defaultBorder:a.defaultBorder,shape:c.shape,alphabetcolors:e.alphabetcolors||a.alphabetcolors,avatarCustomBGColor:c.avatarcustombgcolor||a.custombgcolor,dynamic:c.dynamic||a.dynamic,rotatedeg:c.rotatedeg||a.rotatedeg};if(f.dynamic==="true"){e.$watch("data",function(){b()})}else{b()}function b(){var o="";if(f.charCount==2){var h=getFirstAndLastName(e.data.toUpperCase());if(h){o=h}else{o=e.data.substr(0,f.charCount).toUpperCase()}}else{o=e.data.substr(0,f.charCount).toUpperCase()}var n=getCharacterObject(o,f.textColor,f.fontFamily,f.fontWeight,f.fontsize);var q="";var j="";if(o.charCodeAt(0)<65){j=getRandomColors()}else{q=Math.floor((o.charCodeAt(0)-65)%f.alphabetcolors.length);j=f.alphabetcolors[q]}if(f.avatarCustomBGColor){j=f.avatarCustomBGColor}var k=getImgTag(f.width,f.height,j);k.append(n);var s=angular.element("<div>").append(k.clone()).html();var m=window.btoa(unescape(encodeURIComponent(s)));var p;var g=a.base;var i="";if(f.avatarBorderStyle){i=f.avatarBorderStyle}else{if(f.avatardefaultBorder){i=f.defaultBorder}}if(f.rotatedeg!="0"){i="-ms-transform: rotate("+f.rotatedeg+"deg); -webkit-transform: rotate("+f.rotatedeg+"deg); transform: rotate("+f.rotatedeg+"deg)"}if(f.shape){if(f.shape==="round"){var r=a.radius+i;if(e.data.indexOf("http")>-1||e.data.indexOf("data:image")>-1){var l="width:"+f.width+"px;height:"+f.height+"px;";p="<img src="+e.data+" style='"+l+r+"'  />"}else{p="<img src="+g+m+" style='"+r+"' title='"+e.data+"' />"}}}else{if(e.data.indexOf("http")>-1||e.data.indexOf("data:image")>-1){var l="width:"+f.width+"px;height:"+f.height+"px;";p="<img src="+e.data+" style='"+l+i+"'  />"}else{p="<img src="+g+m+" style='"+i+"' title='"+e.data+"' />"}}if(f.dynamic==="true"){d.empty();d.append(p)}else{d.replaceWith(p)}}}}}]);function getRandomColors(){var c="0123456789ABCDEF".split("");var b="#";for(var a=0;a<6;a++){b+=c[Math.floor(Math.random()*16)]}return b}function getFirstAndLastName(c){var d=c.split(" ");if(d&&d.length>=2){var b=d[0];var a=d[1];if(b&&a){var e=b.substr(0,1)+a.substr(0,1);return e}else{return c.substr(0,2)}}}function getImgTag(c,a,b){var d=angular.element("<svg></svg>").attr({xmlns:"http://www.w3.org/2000/svg","pointer-events":"none",width:c,height:a}).css({"background-color":b,width:c+"px",height:a+"px"});return d}function getCharacterObject(e,d,a,b,f){var c=angular.element('<text text-anchor="middle"></text>').attr({y:"50%",x:"50%",dy:"0.35em","pointer-events":"auto",fill:d,"font-family":a}).html(e).css({"font-weight":b,"font-size":f+"px"});return c};