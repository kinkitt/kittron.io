"use strict";var nla=angular.module("ngLetterAvatar",[]);nla.constant("defaultSettings",{alphabetcolors:["#5A8770","#B2B7BB","#6FA9AB","#F5AF29","#0088B9","#F18636","#D93A37","#A6B12E","#5C9BBC","#F5888D","#9A89B5","#407887","#9A89B5","#5A8770","#D33F33","#A2B01F","#F0B126","#0087BF","#F18636","#0087BF","#B2B7BB","#72ACAE","#9C8AB4","#5A8770","#EEB424","#407887"],textColor:"#ffffff",defaultBorder:"border:5px solid white",triangleup:"width: 0;height: 0;border-left: 50px solid transparent;border-right: 50px solid transparent;border-bottom: 100px solid;",fontsize:30,height:50,width:50,fontWeight:400,charCount:1,fontFamily:"HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica, Arial,Lucida Grande, sans-serif",base:"data:image/svg+xml;base64,",radius:"border-radius:50%;",custombgcolor:"",dynamic:"false",rotatedeg:"0"});nla.directive("ngLetterAvatar",["defaultSettings",function(b){return{restrict:"AE",replace:true,scope:{alphabetcolors:"=alphabetcolors",data:"@"},link:function(h,i,j){var g={charCount:j.charcount||b.charCount,data:j.data,textColor:b.textColor,height:j.height||b.height,width:j.width||b.width,fontsize:j.fontsize||b.fontsize,fontWeight:j.fontweight||b.fontWeight,fontFamily:j.fontfamily||b.fontFamily,avatarBorderStyle:j.avatarcustomborder,avatardefaultBorder:j.avatarborder,defaultBorder:b.defaultBorder,shape:j.shape,alphabetcolors:h.alphabetcolors||b.alphabetcolors,avatarCustomBGColor:j.avatarcustombgcolor||b.custombgcolor,dynamic:j.dynamic||b.dynamic,rotatedeg:j.rotatedeg||b.rotatedeg};if(g.dynamic==="true"){h.$watch("data",function(){a()})}else{a()}function a(){var f="";if(g.charCount==2){var z=getFirstAndLastName(h.data.toUpperCase());if(z){f=z}else{f=h.data.substr(0,g.charCount).toUpperCase()}}else{f=h.data.substr(0,g.charCount).toUpperCase()}var t=getCharacterObject(f,g.textColor,g.fontFamily,g.fontWeight,g.fontsize);var d="";var x="";if(f.charCodeAt(0)<65){x=getRandomColors()}else{d=Math.floor((f.charCodeAt(0)-65)%g.alphabetcolors.length);x=g.alphabetcolors[d]}if(g.avatarCustomBGColor){x=g.avatarCustomBGColor}var w=getImgTag(g.width,g.height,x);w.append(t);var B=angular.element("<div>").append(w.clone()).html();var u=window.btoa(unescape(encodeURIComponent(B)));var e;var A=b.base;var y="";if(g.avatarBorderStyle){y=g.avatarBorderStyle}else{if(g.avatardefaultBorder){y=g.defaultBorder}}if(g.rotatedeg!="0"){y="-ms-transform: rotate("+g.rotatedeg+"deg); -webkit-transform: rotate("+g.rotatedeg+"deg); transform: rotate("+g.rotatedeg+"deg)"}if(g.shape){if(g.shape==="round"){var c=b.radius+y;if(h.data.indexOf("http")>-1||h.data.indexOf("data:image")>-1){var v="width:"+g.width+"px;height:"+g.height+"px;";e="<img src="+h.data+" style='"+v+c+"'  />"}else{e="<img src="+A+u+" style='"+c+"' title='"+h.data+"' />"}}}else{if(h.data.indexOf("http")>-1||h.data.indexOf("data:image")>-1){var v="width:"+g.width+"px;height:"+g.height+"px;";e="<img src="+h.data+" style='"+v+y+"'  />"}else{e="<img src="+A+u+" style='"+y+"' title='"+h.data+"' />"}}if(g.dynamic==="true"){i.empty();i.append(e)}else{i.replaceWith(e)}}}}}]);function getRandomColors(){var f="0123456789ABCDEF".split("");var d="#";for(var e=0;e<6;e++){d+=f[Math.floor(Math.random()*16)]}return d}function getFirstAndLastName(j){var i=j.split(" ");if(i&&i.length>=2){var f=i[0];var g=i[1];if(f&&g){var h=f.substr(0,1)+g.substr(0,1);return h}else{return j.substr(0,2)}}}function getImgTag(h,f,e){var g=angular.element("<svg></svg>").attr({xmlns:"http://www.w3.org/2000/svg","pointer-events":"none",width:h,height:f}).css({"background-color":e,width:h+"px",height:f+"px"});return g}function getCharacterObject(j,k,h,g,i){var l=angular.element('<text text-anchor="middle"></text>').attr({y:"50%",x:"50%",dy:"0.35em","pointer-events":"auto",fill:k,"font-family":h}).html(j).css({"font-weight":g,"font-size":i+"px"});return l};